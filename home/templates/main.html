{% extends "base.html" %}
{% load i18n staticfiles %}

{% block landing %}
    <div class="container-fluid">
        <div class="intro cover-container row no-gutter" id="intro">


            <div class="col-md-12 align-self-center">
                <div class="intro-section" style="transform: translateY(0px); opacity: 1;">

                    <!-- begin logo intro section -->
                    {#					<img src="/media/panam/site/img/logo.svg" alt="logo" class="company-logo">#}
                    <!-- end logo intro section -->
                    <h1 class="main-color">Welcome To The Pan Am Path</h1>


                    <div class="arrow text-center"></div>

                </div>
            </div>
            <div class="video-wrapper" id="player">


                {#                <iframe id="video-background"#}
                {#                        width="560"#}
                {#                        height="315"#}
                {#                        src="https://www.youtube.com/embed/D4znnOuphUM?loop=1&rel=0&controls=0&showinfo=0&autoplay=1&enablejsapi=1"#}
                {#                        frameborder="0"#}
                {#                        allowfullscreen></iframe>#}


                {#                <iframe id="video-background"#}
                {#                        src="https://player.vimeo.com/video/260990910?autoplay=1&loop=1&color=ffffff&title=0&byline=0&portrait=0"#}
                {#                        width="640" height="360" autoplay="true" frameborder="0" webkitallowfullscreen mozallowfullscreen#}
                {#                        allowfullscreen></iframe>#}
                {#    <video autoplay loop id="video-background" muted plays-inline>#}
                {#  <source src="https://player.vimeo.com/video/260990910" type="video/mp4">#}
                {#</video>#}


            </div>
            <script>
                // 2. This code loads the IFrame Player API code asynchronously.
                let tag = document.createElement('script');

                tag.src = "https://www.youtube.com/iframe_api";
                let firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                // 3. This function creates an <iframe> (and YouTube player)
                //    after the API code downloads.
                let player;

                function onYouTubeIframeAPIReady() {
                    player = new YT.Player('player', {
                        height: '560',
                        width: '315',
                        videoId: 'D4znnOuphUM',
                        playerVars: {
                            'autoplay': 1,
                            'rel': 0,
                            'showinfo': 0,
                            'showsearch': 0,
                            'controls': 0,
                            'loop': 1,
                            'enablejsapi': 1,
                            'playlist': 'D4znnOuphUM'
                        },
                        events: {
                            'onReady': onPlayerReady,
                            'onStateChange': onPlayerStateChange
                        }
                    });
                }

                // 4. The API will call this function when the video player is ready.
                function onPlayerReady(event) {
                    event.target.playVideo();
                }

                // 5. The API calls this function when the player's state changes.
                //    The function indicates that when playing a video (state=1),
                //    the player should play for six seconds and then stop.
                let done = false;

                function onPlayerStateChange(event) {
                    if (event.data == YT.PlayerState.PLAYING && !done) {
                        setTimeout(stopVideo, 6000);
                        done = true;
                    }
                }

                function stopVideo() {
                    if(done){
                        player.stopVideo();
                        player.playVideo();
                    }

                }
            </script>
        </div>
    </div>


{% endblock landing %}